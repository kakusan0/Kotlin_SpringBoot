# Application Configuration
spring.application.name=demo
# Database Configuration with Connection Pool Optimization
spring.datasource.url=${DB_URL:jdbc:postgresql://localhost:5432/demo_db}
spring.datasource.username=${DB_USERNAME:demo_user}
spring.datasource.password=${DB_PASSWORD:demo_pass}
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000
spring.datasource.hikari.leak-detection-threshold=60000

# Flyway Configuration
spring.flyway.enabled=true
spring.flyway.baseline-on-migrate=true
spring.flyway.url=${DB_URL:jdbc:postgresql://localhost:5432/demo_db}
spring.flyway.user=${DB_USERNAME:demo_user}
spring.flyway.password=${DB_PASSWORD:demo_pass}

# Session Configuration
spring.session.jdbc.initialize-schema=always
spring.session.jdbc.table-name=SPRING_SESSION
# HTTP Configuration (Development)
server.port=8080
# SSL is disabled - using HTTP
# server.ssl.enabled=true
# server.ssl.key-store=classpath:keystore/keystore.p12
# server.ssl.key-store-password=changeit
# server.ssl.key-store-type=PKCS12
# server.ssl.key-alias=1

# Security Configuration
server.servlet.session.timeout=30m
server.servlet.session.cookie.http-only=true
# server.servlet.session.cookie.secure=true
server.servlet.session.cookie.same-site=strict
# Spring Security
spring.security.user.name=disabled
spring.security.user.password=disabled

# MyBatis Configuration
mybatis.mapper-locations=classpath*:mapper/*.xml
mybatis.configuration.map-underscore-to-camel-case=true
mybatis.configuration.default-fetch-size=100
mybatis.configuration.default-statement-timeout=30
mybatis.configuration.lazy-loading-enabled=true
mybatis.configuration.aggressive-lazy-loading=false
# Cache Configuration
spring.cache.type=simple
spring.cache.cache-names=contentItems,contentItemsByMenu,contentItemById,menus,menusIncludingDeleted,menuById,pathsActive,pathsAll,pathById
# Performance Optimizations
server.compression.enabled=true
server.compression.mime-types=text/html,text/xml,text/plain,text/css,text/javascript,application/javascript,application/json,application/xml
server.compression.min-response-size=1024
server.http2.enabled=true
# Logging Configuration
logging.level.root=INFO
logging.level.com.example.demo=INFO
logging.level.org.springframework.web=INFO
logging.level.org.springframework.security=INFO
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %logger{36} - %msg%n
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n
# Actuator Configuration
management.endpoints.web.exposure.include=health,info
management.endpoint.health.show-details=when-authorized
management.health.defaults.enabled=true
# Jackson Configuration (JSON???)
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.time-zone=Asia/Tokyo
spring.jackson.default-property-inclusion=non_null
# Thymeleaf Configuration
spring.thymeleaf.cache=true
spring.thymeleaf.encoding=UTF-8
spring.thymeleaf.mode=HTML

# Spring DevTools: exclude resources that cause classloader churn on restart
spring.devtools.restart.additional-exclude=mapper/**,db/migration/**

# GeoIP country filter (MaxMind)
# Path to GeoLite2-Country.mmdb (download from MaxMind and set absolute path). If blank, GeoIP is disabled.
geoip.mmdb-path=C:/Users/gmaki/GeoLite2-Country.mmdb
# Comma-separated ISO country codes to allow. Non-listed countries will be blocked and blacklisted.
geoip.allowed-country-codes=JP

# App settings
# If behind a trusted proxy/load balancer, set true to use X-Forwarded-For
app.trust-proxy=false

# Static resources optimization
spring.web.resources.cache.cachecontrol.max-age=31536000
spring.web.resources.cache.cachecontrol.cache-public=true
spring.web.resources.chain.enabled=true
spring.web.resources.chain.strategy.content.enabled=true
spring.web.resources.chain.strategy.content.paths=/**
