spring:
  cloud:
    vault:
      enabled: true
  # Vaultから取得する値
  # Vaultパス: secret/application/prod に以下のキーを設定
  #   - db.url, db.username, db.password
  #   - redis.host, redis.port, redis.password (オプション)
  datasource:
    url: ${db.url:jdbc:postgresql://db:5432/demo_db}
    username: ${db.username:demo_user}
    password: ${db.password:demo_pass}
    hikari:
      maximum-pool-size: 20
      minimum-idle: 5
      connection-timeout: 30000
      idle-timeout: 600000
      max-lifetime: 1800000
  flyway:
    baseline-version: 0
    validate-on-migrate: true
    clean-disabled: true
    out-of-order: false
  thymeleaf:
    cache: true
  web:
    resources:
      cache:
        cachecontrol:
          max-age: 31536000
          cache-public: true
  data:
    redis:
      host: ${redis.host:redis-host}
      port: ${redis.port:6379}
      password: ${redis.password:}
  session:
    store-type: redis
    redis:
      namespace: app:sessions

server:
  port: 8080
  ssl:
    enabled: false
  servlet:
    session:
      cookie:
        secure: false
      timeout: 5m

logging:
  level:
    root: WARN
    com.example.demo: INFO
    org.springframework.web: WARN
    org.springframework.security: WARN
  file:
    name: logs/application.log
  logback:
    rollingpolicy:
      max-file-size: 10MB
      max-history: 30
      total-size-cap: 1GB

geoip:
  mmdb-path: /opt/geoip/GeoLite2-Country.mmdb
  allowed-country-codes: JP

app:
  trust-proxy: true
  login:
    rate-limit:
      capacity: 5
      refill-minutes: 5
  csp:
    connect-src: "'self'"

