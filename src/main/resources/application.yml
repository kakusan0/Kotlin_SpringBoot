spring:
  profiles:
    active: ${SPRING_PROFILES_ACTIVE:dev}
  config:
    import: optional:vault://
  cloud:
    vault:
      enabled: ${VAULT_ENABLED:false}
      scheme: ${VAULT_SCHEME:https}
      uri: ${VAULT_URI:https://vault.example.com:8200}
      authentication: ${VAULT_AUTH_METHOD:TOKEN}
      token: ${VAULT_TOKEN:}
      kv:
        enabled: true
        backend: ${VAULT_KV_BACKEND:secret}
        default-context: ${VAULT_KV_CONTEXT:application}
        profile-separator: /
      # Kubernetes認証（K8s環境用）
      kubernetes:
        role: ${VAULT_K8S_ROLE:}
        kubernetes-path: ${VAULT_K8S_PATH:kubernetes}
        service-account-token-file: ${VAULT_K8S_TOKEN_FILE:/var/run/secrets/kubernetes.io/serviceaccount/token}
      # AppRole認証（CI/CD用）
      app-role:
        role-id: ${VAULT_APPROLE_ROLE_ID:}
        secret-id: ${VAULT_APPROLE_SECRET_ID:}
        app-role-path: ${VAULT_APPROLE_PATH:approle}
  session:
    jdbc:
      initialize-schema: always
      table-name: SPRING_SESSION
  servlet:
    session:
      cookie:
        same-site: strict
  flyway:
    enabled: true
    locations: classpath:db/migration
    baseline-on-migrate: true
  cache:
    type: simple
    cache-names:
      - menuById
      - pathById
  jackson:
    serialization:
      write-dates-as-timestamps: false
    time-zone: Asia/Tokyo
    default-property-inclusion: non_null
  devtools:
    restart:
      additional-exclude: mapper/**,db/migration/**

mybatis:
  mapper-locations: classpath*:mapper/*.xml
  configuration:
    map-underscore-to-camel-case: true
    default-fetch-size: 100
    default-statement-timeout: 30
    lazy-loading-enabled: true
    aggressive-lazy-loading: false

logging:
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} - %logger{36} - %msg%n"
    file: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"

management:
  endpoints:
    web:
      exposure:
        include:
          - health
          - info
  endpoint:
    health:
      show-details: when-authorized
  health:
    defaults:
      enabled: true

app:
  login:
    rate-limit:
      capacity: 5
      refill-minutes: 5
  trust-proxy: true
  csp:
    connect-src: "'self'"

report:
  holidayPosition: START
