# 開発環境用 Dockerfile
FROM maven:3.9-eclipse-temurin-21

WORKDIR /app

# pom.xml と依存関係を先にコピー
COPY pom.xml .
COPY mvnw .
COPY mvnw.cmd .
COPY .mvn .mvn

# 依存関係のダウンロード
RUN mvn dependency:go-offline -B -Pdev

# ソースコードをコピー
COPY src ./src

# ポート公開
EXPOSE 8080

# 開発環境プロファイルで起動（ホットリロード有効）
CMD ["mvn", "spring-boot:run", "-Pdev"]

